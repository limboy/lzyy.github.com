!function(N,i){"use strict";var n,t,E,r,m="commento",a="commento-main-area",c="commento-login",H="commento-login-box-container",T="commento-login-box",C="commento-login-box-email-subtitle",L="commento-login-box-email-input",u="commento-login-box-password-input",p="commento-login-box-name-input",v="commento-login-box-website-input",M="commento-login-box-email-button",S="commento-login-box-forgot-link-container",B="commento-login-box-login-link-container",D="commento-login-box-sso-pretext",A="commento-login-box-sso-buttton-container",R="commento-login-box-hr1",O="commento-login-box-oauth-pretext",I="commento-login-box-oauth-buttons-container",U="commento-login-box-hr2",l="commento-mod-tools",d="commento-mod-tools-lock-button",s="commento-error",f="commento-logged-container",h="commento-comments-area",y="commento-textarea-super-container-",g="commento-textarea-container-",x="commento-textarea-",b="commento-anonymous-checkbox-",P="commento-comment-card-",q="commento-comment-body-",j="commento-comment-text-",W="commento-comment-subtitle-",Y="commento-comment-timeago-",F="commento-comment-score-",J="commento-comment-options-",_="commento-comment-edit-",V="commento-comment-reply-",X="commento-comment-collapse-",z="commento-comment-upvote-",G="commento-comment-downvote-",$="commento-comment-approve-",K="commento-comment-remove-",Q="commento-comment-sticky-",Z="commento-comment-children-",ee="commento-comment-contents-",oe="commento-comment-name-",w="commento-submit-button-",ne="commento-markdown-button-",te="commento-markdown-help-",k="http://commento.limboy.me",ie="http://commento.limboy.me",re=null,me=!1,ae=[],ce={},le={},de=!0,se=!1,ue=!1,pe=!1,ve=!1,fe="none",he={},ge={},xe={},be="login",we=!1,ke=void 0,ye=null;function He(e){return i.getElementById(e)}function Te(e,o){e.prepend(o)}function Ce(e,o){e.appendChild(o)}function Le(e,o){e.parentNode.insertBefore(o,e.nextSibling)}function Me(e,o){e.classList.add("commento-"+o)}function Se(e,o){null!==e&&e.classList.remove("commento-"+o)}function Be(e){return i.createElement(e)}function Ne(e){null!==e&&e.parentNode.removeChild(e)}function Ee(e,o){var n=e.attributes[o];if(void 0!==n)return n.value}function De(e){if(null!==e){var o=e.cloneNode(!0);if(null!==e.parentNode)return e.parentNode.replaceChild(o,e),o}return e}function Ae(e,o,n){e.addEventListener("click",function(){o(n)},!1)}function Re(e,o,n){e.setAttribute(o,n)}function Oe(e,o,n){var t=new XMLHttpRequest;t.open("POST",e,!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.onload=function(){n(JSON.parse(t.response))},t.send(JSON.stringify(o))}function Ie(e){"function"==typeof e&&e()}function Ue(e,o){var n,t=new Date;t.setTime(t.getTime()+31536e6),n="; expires="+t.toUTCString(),i.cookie=e+"="+o+n+"; path=/"}function Pe(){var e=function(e){var o=("; "+i.cookie).split("; "+e+"=");if(2===o.length)return o.pop().split(";").shift()}("commentoCommenterToken");return void 0===e?"anonymous":e}function qe(e){le[e.commenterHex]=e,ke=e.commenterHex;var o,n,t=Be("div"),i=Be("div");o="undefined"!==e.link?Be("a"):Be("div");var r=Be("div"),m=ze(e.commenterHex+"-"+e.name);t.id=f,Me(t,"logged-container"),Me(i,"logged-in-as"),Me(o,"name"),Me(r,"logout"),o.innerText=e.name,r.innerText="Logout",Ae(r,N.logout),Re(t,"style","display: none"),"undefined"!==e.link&&Re(o,"href",e.link),"undefined"===e.photo?((n=Be("div")).style.background=m,n.innerHTML=e.name[0].toUpperCase(),Me(n,"avatar")):(Re(n=Be("img"),"src",ie+"/api/commenter/photo?commenterHex="+e.commenterHex),Me(n,"avatar-img")),Ce(i,n),Ce(i,o),Ce(t,i),Ce(t,r),Te(re,t),me=!0}function je(o){if("anonymous"===Pe())return me=!1,void Ie(o);var e={commenterToken:Pe()};Oe(k+"/api/commenter/self",e,function(e){if(!e.success)return Ue("commentoCommenterToken","anonymous"),void Ie(o);qe(e.commenter),N.allShow(),Ie(o)})}function We(e,o){var n=Be("link"),t=i.getElementsByTagName("head")[0];n.type="text/css",Re(n,"href",e),Re(n,"rel","stylesheet"),Re(n,"onload",o),Ce(t,n)}function Ye(e){var o=He(s);o.innerText=e,Re(o,"style","display: block;")}function Fe(){Re(He(s),"style","display: none;")}function Je(e){var o=He(y+e),n=He(ne+e),t=Be("table"),i=Be("tr"),r=Be("td"),m=Be("td"),a=Be("tr"),c=Be("td"),l=Be("td"),d=Be("tr"),s=Be("td"),u=Be("td"),p=Be("tr"),v=Be("td"),f=Be("td"),h=Be("tr"),g=Be("td"),x=Be("td"),b=Be("tr"),w=Be("td"),k=Be("td");t.id=te+e,Me(t,"markdown-help"),c.innerHTML="<b>bold</b>",l.innerHTML="surround text with <pre>**two asterisks**</pre>",r.innerHTML="<i>italics</i>",m.innerHTML="surround text with <pre>*asterisks*</pre>",s.innerHTML="<pre>code</pre>",u.innerHTML="surround text with <pre>`backticks`</pre>",v.innerHTML="<strike>strikethrough</strike>",f.innerHTML="surround text with <pre>~~two tilde characters~~</pre>",g.innerHTML='<a href="https://example.com">hyperlink</a>',x.innerHTML="<pre>[hyperlink](https://example.com)</pre> or just a bare URL",w.innerHTML="<blockquote>quote</blockquote>",k.innerHTML="prefix with <pre>&gt;</pre>",Ae(n=De(n),_e,e),Ce(i,r),Ce(i,m),Ce(t,i),Ce(a,c),Ce(a,l),Ce(t,a),Ce(h,g),Ce(h,x),Ce(t,h),Ce(d,s),Ce(d,u),Ce(t,d),Ce(p,v),Ce(p,f),Ce(t,p),Ce(b,w),Ce(b,k),Ce(t,b),Ce(o,t)}function _e(e){var o=He(ne+e),n=He(te+e);Ae(o=De(o),Je,e),Ne(n)}function Ve(e,o){var n=Be("div"),t=Be("div"),i=Be("textarea"),r=Be("div"),m=Be("input"),a=Be("label"),c=Be("button"),l=Be("a");return n.id=y+e,t.id=g+e,i.id=x+e,m.id=b+e,c.id=w+e,l.id=ne+e,Me(t,"textarea-container"),Me(r,"round-check"),Me(r,"anonymous-checkbox-container"),Me(c,"button"),Me(c,"submit-button"),Me(l,"markdown-button"),Me(n,"button-margin"),Re(i,"placeholder","Add a comment"),Re(m,"type","checkbox"),Re(a,"for",b+e),a.innerText="Comment anonymously",c.innerText=!0===o?"Save Changes":"Add Comment",l.innerHTML="<b>M &#8595;</b> &nbsp; Markdown",i.oninput=function(e){return function(){e.style.height="",e.style.height=Math.min(Math.max(e.scrollHeight,75),400)+"px"}}(i),Ae(c,!0===o?Qe:eo,e),Ae(l,Je,e),Ce(t,i),Ce(n,t),Ce(r,m),Ce(r,a),Ce(n,c),de||!0===o||Ce(n,r),Ce(n,l),n}function Xe(e){var o=Be("div");return Me(o,"moderation-notice"),o.innerText=e,o}function ze(e){for(var o=["#396ab1","#da7c30","#3e9651","#cc2529","#922428","#6b4c9a","#535154"],n=0,t=0;t<e.length;t++)n+=e.charCodeAt(t);return o[n%o.length]}function Ge(e){return 1!==e?e+" points":e+" point"}function $e(L,M){var e=L[M];if(!e||!e.length)return null;e.sort(function(e,o){return e.deleted||e.commentHex!==fe?o.deleted||o.commentHex!==fe?e.score!==o.score?o.score-e.score:e.creationDate<o.creationDate?-1:1:1/0:-1/0});var S=(new Date).getTime(),B=Be("div");return e.forEach(function(e){var o,n,t=le[e.commenterHex],i=Be("div"),r=Be("div"),m=Be("div"),a=Be("div"),c=Be("div"),l=Be("div"),d=Be("div"),s=Be("div"),u=Be("button"),p=Be("button"),v=Be("button"),f=Be("button"),h=Be("button"),g=Be("button"),x=Be("button"),b=Be("button"),w=$e(L,e.commentHex),k=Be("div"),y=ze(e.commenterHex+"-"+t.name);if(n="undefined"!==t.link&&"https://undefined"!==t.link&&""!==t.link?Be("a"):Be("div"),i.id=P+e.commentHex,l.id=q+e.commentHex,d.id=j+e.commentHex,m.id=W+e.commentHex,a.id=Y+e.commentHex,c.id=F+e.commentHex,s.id=J+e.commentHex,u.id=_+e.commentHex,p.id=V+e.commentHex,v.id=X+e.commentHex,f.id=z+e.commentHex,h.id=G+e.commentHex,g.id=$+e.commentHex,x.id=K+e.commentHex,b.id=Q+e.commentHex,w&&(w.id=Z+e.commentHex),k.id=ee+e.commentHex,n.id=oe+e.commentHex,v.title="Collapse children",f.title="Upvote",h.title="Downvote",u.title="Edit",p.title="Reply",g.title="Approve",x.title="Remove",fe===e.commentHex?b.title=se?"Unsticky":"This comment has been stickied":b.title="Sticky",a.title=e.creationDate.toString(),i.style.borderLeft="2px solid "+y,e.deleted?n.innerText="[deleted]":n.innerText=t.name,d.innerHTML=e.html,a.innerHTML=function(e,o){var n=e-o;return n<5e3?"just now":n<6e4?Math.round(n/1e3)+" seconds ago":n<36e5?Math.round(n/6e4)+" minutes ago":n<864e5?Math.round(n/36e5)+" hours ago":n<2592e6?Math.round(n/864e5)+" days ago":n<94608e7?Math.round(n/2592e6)+" months ago":Math.round(n/94608e7)+" years ago"}(S,e.creationDate),c.innerText=Ge(e.score),"undefined"===t.photo?((o=Be("div")).style.background=y,"anonymous"===e.commenterHex?(o.innerHTML="?",o.style["font-weight"]="bold"):o.innerHTML=t.name[0].toUpperCase(),Me(o,"avatar")):(Re(o=Be("img"),"src",ie+"/api/commenter/photo?commenterHex="+t.commenterHex),Me(o,"avatar-img")),Me(i,"card"),se&&"approved"!==e.state&&Me(i,"dark-card"),t.isModerator&&Me(n,"moderator"),"flagged"===e.state&&Me(n,"flagged"),Me(r,"header"),Me(n,"name"),Me(m,"subtitle"),Me(a,"timeago"),Me(c,"score"),Me(l,"body"),Me(s,"options"),ye&&Me(s,"options-mobile"),Me(u,"option-button"),Me(u,"option-edit"),Me(p,"option-button"),Me(p,"option-reply"),Me(v,"option-button"),Me(v,"option-collapse"),Me(f,"option-button"),Me(f,"option-upvote"),Me(h,"option-button"),Me(h,"option-downvote"),Me(g,"option-button"),Me(g,"option-approve"),Me(x,"option-button"),Me(x,"option-remove"),Me(b,"option-button"),fe===e.commentHex?Me(b,"option-unsticky"):Me(b,"option-sticky"),me&&(0<e.direction?Me(f,"upvoted"):e.direction<0&&Me(h,"downvoted")),Ae(u,N.editShow,e.commentHex),Ae(v,N.commentCollapse,e.commentHex),Ae(g,N.commentApprove,e.commentHex),Ae(x,N.commentDelete,e.commentHex),Ae(b,N.commentSticky,e.commentHex),me){var H=Ke(f,h,e.commentHex,e.direction);f=H[0],h=H[1]}else Ae(f,N.loginBoxShow,null),Ae(h,N.loginBoxShow,null);Ae(p,N.replyShow,e.commentHex),"undefined"!==t.link&&"https://undefined"!==t.link&&""!==t.link&&Re(n,"href",t.link),Ce(s,v),e.deleted||(Ce(s,h),Ce(s,f)),e.commenterHex===ke?Ce(s,u):e.deleted||Ce(s,p),!e.deleted&&se&&"root"===M&&Ce(s,b),e.deleted||!se&&e.commenterHex!==ke||Ce(s,x),se&&"approved"!==e.state&&Ce(s,g),e.deleted||se||fe!==e.commentHex||Ce(s,b),Re(s,"style","width: "+32*(s.childNodes.length+1)+"px;");for(var T=0;T<s.childNodes.length;T++)Re(s.childNodes[T],"style","right: "+32*T+"px;");if(Ce(m,c),Ce(m,a),ye||Ce(r,s),Ce(r,o),Ce(r,n),Ce(r,m),Ce(l,d),Ce(k,l),ye){Ce(k,s);var C=Be("div");Me(C,"options-clearfix"),Ce(k,C)}w&&(Me(w,"body"),Ce(k,w)),Ce(i,r),Ce(i,k),console.log(w),e.deleted&&("true"===E||null===w)||Ce(B,i)}),0===B.childNodes.length?null:B}function Ke(e,o,n,t){return e=De(e),o=De(o),0<t?(Ae(e,N.vote,[n,[1,0]]),Ae(o,N.vote,[n,[1,-1]])):t<0?(Ae(e,N.vote,[n,[-1,1]]),Ae(o,N.vote,[n,[-1,0]])):(Ae(e,N.vote,[n,[0,1]]),Ae(o,N.vote,[n,[0,-1]])),[e,o]}function Qe(i){var e=He(x+i),r=e.value;if(""!==r){Se(e,"red-border");var o={commenterToken:Pe(),commentHex:i,markdown:r};Oe(k+"/api/comment/edit",o,function(e){if(e.success){Fe(),ce[i].markdown=r,ce[i].html=e.html;var o=He(_+i),n=He(y+i);n.innerHTML=ce[i].html,n.id=j+i,delete ge[i],Me(o,"option-edit"),Se(o,"option-cancel"),o.title="Edit comment",Ae(o=De(o),N.editShow,i);var t="";"unapproved"===e.state?t="Your comment is under moderation.":"flagged"===e.state&&(t="Your comment was flagged as spam and is under moderation."),""!==t&&Te(He(y+i),Xe(t))}else Ye(e.message)})}else Me(e,"red-border")}function Ze(e){me?N.commentNew(e,Pe()):N.loginBoxShow(e)}function eo(e){if(de)Ze(e);else{var o=He(b+e),n=He(x+e);if(""!==n.value)return Se(n,"red-border"),o.checked?void function(e){pe=!0,N.commentNew(e,"anonymous")}(e):void Ze(e);Me(n,"red-border")}}function o(e){He(m).innerHTML="",he={},N.main(e)}function oo(e,o,n){Oe(k+"/api/commenter/login",{email:e,password:o},function(e){if(!e.success)return N.loginBoxClose(),void Ye(e.message);Fe(),Ue("commentoCommenterToken",e.commenterToken),qe(e.commenter),N.allShow(),Ne(He(c)),null!==n?N.commentNew(n,e.commenterToken,function(){N.loginBoxClose()}):N.loginBoxClose()})}function no(o){var e={isLocked:ve,stickyCommentHex:fe},n={commenterToken:Pe(),domain:parent.location.host,path:parent.location.pathname,attributes:e};Oe(k+"/api/page/update",n,function(e){e.success?(Fe(),Ie(o)):Ye(e.message)})}function e(){for(var e=function(e){return i.getElementsByTagName(e)}("script"),o=0;o<e.length;o++)e[o].src.match(/\/js\/commento\.js$/)&&(n=Ee(e[o],"data-css-override"),r=Ee(e[o],"data-auto-init"),void 0===(m=Ee(e[o],"data-id-root"))&&(m="commento"),t=Ee(e[o],"data-no-fonts"),E=Ee(e[o],"data-hide-deleted"))}N.logout=function(){Ue("commentoCommenterToken","anonymous"),se=me=!1,ke=void 0,o()},N.commentNew=function(r,m,a){var c=He(y+r),l=He(x+r),d=He(V+r),s=l.value;if(""!==s){Se(l,"red-border");var e={commenterToken:m,domain:parent.location.host,path:parent.location.pathname,parentHex:r,markdown:s};Oe(k+"/api/comment/new",e,function(e){if(e.success){Fe();var o="";"unapproved"===e.state?o="Your comment is under moderation.":"flagged"===e.state&&(o="Your comment was flagged as spam and is under moderation."),""!==o&&Te(He(y+r),Xe(o));var n=ke;void 0!==n&&"anonymous"!==m||(n="anonymous");var t={commentHex:e.commentHex,commenterHex:n,markdown:s,html:e.html,parentHex:"root",score:0,state:"approved",direction:0,creationDate:new Date},i=$e({root:[t]},"root");ce[e.commentHex]=t,"root"!==r?(c.replaceWith(i),he[r]=!1,Me(d,"option-reply"),Se(d,"option-cancel"),d.title="Reply to this comment",Ae(d,N.replyShow,r)):(l.value="",Le(c,i)),Ie(a)}else Ye(e.message)})}else Me(l,"red-border")},N.commentApprove=function(i){var e={commenterToken:Pe(),commentHex:i};Oe(k+"/api/comment/approve",e,function(e){if(e.success){Fe();var o=He(P+i),n=He(oe+i),t=He($+i);Se(o,"dark-card"),Se(n,"flagged"),Ne(t)}else Ye(e.message)})},N.commentDelete=function(o){if(confirm("Are you sure you want to delete this comment?")){var e={commenterToken:Pe(),commentHex:o};Oe(k+"/api/comment/delete",e,function(e){e.success?(Fe(),He(j+o).innerText="[deleted]"):Ye(e.message)})}},N.vote=function(e){var o=e[0],n=e[1][0],t=e[1][1],i=He(z+o),r=He(G+o),m=He(F+o),a={commenterToken:Pe(),commentHex:o,direction:t},c=Ke(i,r,o,t);i=c[0],r=c[1],Se(i,"upvoted"),Se(r,"downvoted"),0<t?Me(i,"upvoted"):t<0&&Me(r,"downvoted"),m.innerText=Ge(parseInt(m.innerText.replace(/[^\d-.]/g,""))+t-n),Oe(k+"/api/comment/vote",a,function(e){if(!e.success)return Ye(e.message),Se(i,"upvoted"),Se(r,"downvoted"),m.innerText=Ge(parseInt(m.innerText.replace(/[^\d-.]/g,""))-t+n),void Ke(i,r,o,n);Fe()})},N.editShow=function(e){if(!(e in ge&&ge[e])){var o=He(j+e);ge[e]=!0,o.replaceWith(Ve(e,!0)),He(x+e).value=ce[e].markdown;var n=He(_+e);Se(n,"option-edit"),Me(n,"option-cancel"),n.title="Cancel edit",Ae(n=De(n),N.editCollapse,e)}},N.editCollapse=function(e){var o=He(_+e),n=He(y+e);n.innerHTML=ce[e].html,n.id=j+e,delete ge[e],Me(o,"option-edit"),Se(o,"option-cancel"),o.title="Edit comment",Ae(o=De(o),N.editShow,e)},N.replyShow=function(e){if(!(e in he&&he[e])){Le(He(j+e),Ve(e)),he[e]=!0;var o=He(V+e);Se(o,"option-reply"),Me(o,"option-cancel"),o.title="Cancel reply",Ae(o=De(o),N.replyCollapse,e)}},N.replyCollapse=function(e){var o=He(V+e);He(y+e).remove(),delete he[e],Me(o,"option-reply"),Se(o,"option-cancel"),o.title="Reply to this comment",Ae(o=De(o),N.replyShow,e)},N.commentCollapse=function(e){var o=He(Z+e),n=He(X+e);o&&Me(o,"hidden"),Se(n,"option-collapse"),Me(n,"option-uncollapse"),n.title="Expand children",Ae(n=De(n),N.commentUncollapse,e)},N.commentUncollapse=function(e){var o=He(Z+e),n=He(X+e);o&&Se(o,"hidden"),Se(n,"option-uncollapse"),Me(n,"option-collapse"),n.title="Collapse children",Ae(n=De(n),N.commentCollapse,e)},N.commentoAuth=function(e){var n=e.provider,t=e.id,i=window.open("","_blank");!function(e,o){var n=new XMLHttpRequest;n.open("GET",e,!0),n.onload=function(){o(JSON.parse(n.response))},n.send(null)}(k+"/api/commenter/token/new",function(o){if(o.success){Fe(),Ue("commentoCommenterToken",o.commenterToken),i.location=k+"/api/oauth/"+n+"/redirect?commenterToken="+o.commenterToken;var e=setInterval(function(){i.closed&&(clearInterval(e),je(function(){var e=He(f);e&&Re(e,"style",""),"anonymous"!==Pe()&&Ne(He(c)),null!==t?N.commentNew(t,o.commenterToken,function(){N.loginBoxClose()}):N.loginBoxClose()}))},250)}else Ye(o.message)})},N.popupRender=function(n){var e=He(H),o=Be("div"),t=Be("div"),i=Be("div"),r=Be("div"),m=Be("hr"),a=Be("div"),c=Be("div"),l=Be("div"),d=Be("hr"),s=Be("div"),u=Be("div"),p=Be("div"),v=Be("input"),f=Be("button"),h=Be("div"),g=Be("a"),x=Be("div"),b=Be("a"),w=Be("div");o.id=T,s.id=C,v.id=L,f.id=M,h.id=S,x.id=B,i.id=A,t.id=D,m.id=R,a.id=O,c.id=I,d.id=U,Me(e,"login-box-container"),Me(o,"login-box"),Me(s,"login-box-subtitle"),Me(u,"email-container"),Me(p,"email"),Me(v,"input"),Me(f,"email-button"),Me(h,"forgot-link-container"),Me(g,"forgot-link"),Me(x,"login-link-container"),Me(b,"login-link"),Me(t,"login-box-subtitle"),Me(i,"oauth-buttons-container"),Me(r,"oauth-buttons"),Me(a,"login-box-subtitle"),Me(c,"oauth-buttons-container"),Me(l,"oauth-buttons"),Me(w,"login-box-close"),Me(re,"root-min-height"),g.innerText="Forgot your password?",b.innerText="Don't have an account? Sign up.",s.innerText="Login with your email address",f.innerText="Continue",a.innerText="Proceed with social login",t.innerText="Proceed with "+parent.location.host+" authentication",Ae(f,N.passwordAsk,n),Ae(g,N.forgotPassword,n),Ae(b,N.popupSwitch,n),Ae(w,N.loginBoxClose),Re(e,"style","display: none; opacity: 0;"),Re(v,"name","email"),Re(v,"placeholder","Email address"),Re(v,"type","text");var k=0;if(["google","twitter","github","gitlab"].forEach(function(e){if(xe[e]){var o=Be("button");Me(o,"button"),Me(o,e+"-button"),o.innerText=e,Ae(o,N.commentoAuth,{provider:e,id:n}),Ce(l,o),k++}}),xe.sso){var y=Be("button");Me(y,"button"),Me(y,"sso-button"),y.innerText="Single Sign-On",Ae(y,N.commentoAuth,{provider:"sso",id:n}),Ce(r,y),Ce(i,r),Ce(o,t),Ce(o,i),(0<k||xe.commento)&&Ce(o,m)}we=0<k&&(Ce(o,a),Ce(c,l),Ce(o,c),!0),Ce(p,v),Ce(p,f),Ce(u,p),Ce(h,g),Ce(x,b),0<k&&xe.commento&&Ce(o,d),xe.commento&&(Ce(o,s),Ce(o,u),Ce(o,h),Ce(o,x)),Ce(o,w),be="login",e.innerHTML="",Ce(e,o)},N.forgotPassword=function(){window.open("","_blank").location=k+"/forgot?commenter=true",N.loginBoxClose()},N.popupSwitch=function(e){var o=He(C);we&&(Ne(He(I)),Ne(He(O)),Ne(He(R)),Ne(He(U))),xe.sso&&(Ne(He(A)),Ne(He(D)),Ne(He(R)),Ne(He(U))),Ne(He(B)),Ne(He(S)),o.innerText="Create an account",be="signup",N.passwordAsk(e),He(L).focus()},N.login=function(e){var o=He(L),n=He(u);oo(o.value,n.value,e)},N.signup=function(o){var n=He(L),e=He(p),t=He(v),i=He(u),r={email:n.value,name:e.value,website:t.value,password:i.value};Oe(k+"/api/commenter/new",r,function(e){if(!e.success)return N.loginBoxClose(),void Ye(e.message);Fe(),oo(n.value,i.value,o)})},N.passwordAsk=function(e){var o,n,t,i,r=He(T),m=He(C);Ne(He(M)),Ne(He(B)),Ne(He(S)),we&&0<xe.length&&(Ne(He(R)),Ne(He(U)),Ne(He(O)),Ne(He(I))),i="signup"===be?(o=["name","website","password"],n=[p,v,u],t=["text","text","password"],["Real Name","Website (Optional)","Password"]):(o=["password"],n=[u],t=["password"],["Password"]),m.innerText="signup"===be?"Finish the rest of your profile to complete.":"Enter your password to log in.";for(var a=0;a<o.length;a++){var c=Be("div"),l=Be("div"),d=Be("input");if(d.id=n[a],Me(c,"email-container"),Me(l,"email"),Me(d,"input"),Re(d,"name",o[a]),Re(d,"type",t[a]),Re(d,"placeholder",i[a]),Ce(l,d),Ce(c,l),"password"===o[a]){var s=Be("button");Me(s,"email-button"),s.innerText=be,Ae(s,"signup"===be?N.signup:N.login,e),Ce(l,s)}Ce(r,c)}"signup"===be?He(p).focus():He(u).focus()},N.threadLockToggle=function(){var e=He(d);ve=!ve,e.disabled=!0,no(function(){e.disabled=!1,o()})},N.commentSticky=function(o){if("none"!==fe){var e=He(Q+fe);Se(e,"option-unsticky"),Me(e,"option-sticky")}fe=fe===o?"none":o,no(function(){var e=He(Q+o);fe===o?(Se(e,"option-sticky"),Me(e,"option-unsticky")):(Se(e,"option-unsticky"),Me(e,"option-sticky"))})},N.loadCssOverride=function(){void 0===n?N.allShow():We(n,"window.commento.allShow()")},N.allShow=function(){var e=He(a),o=He(l),n=He(f);Re(e,"style",""),se&&Re(o,"style",""),n&&Re(n,"style","")},N.loginBoxClose=function(){var e=He(a),o=He(H);Se(e,"blurred"),Se(re,"root-min-height"),Re(o,"style","display: none")},N.loginBoxShow=function(e){var o=He(a),n=He(H);N.popupRender(e),Me(o,"blurred"),Re(n,"style",""),window.location.hash=H,He(L).focus()};var to=!(N.main=function(e){if(null!==(re=He(m))){null===ye&&(ye=re.getBoundingClientRect().width<450),Me(re,"root"),"true"!==t&&Me(re,"root-font"),function(){var e=Be("div");e.id=H,Ce(re,e)}(),function(){var e=Be("div");e.id=s,Me(e,"error-box"),Re(e,"style","display: none;"),Ce(re,e)}(),function(){var e=Be("div");e.id=a,Me(e,"main-area"),Re(e,"style","display: none"),Ce(re,e)}();var o=function(){var e=Be("div"),o=Be("div"),n=Be("a"),t=Be("span");return e.id="commento-footer",Me(e,"footer"),Me(o,"logo-container"),Me(n,"logo"),Me(t,"logo-text"),Re(n,"href","https://commento.io"),Re(n,"target","_blank"),t.innerText="Commento",Ce(n,t),Ce(o,n),Ce(e,o),e}();We(ie+"/css/commento.css","window.commento.loadCssOverride()"),je(function(){!function(o){var e={commenterToken:Pe(),domain:parent.location.host,path:parent.location.pathname};Oe(k+"/api/comment/list",e,function(e){e.success?(Fe(),de=e.requireIdentification,se=e.isModerator,ue=e.isFrozen,ve=e.attributes.isLocked,fe=e.attributes.stickyCommentHex,ae=e.comments,le=Object.assign({},le,e.commenters),xe=e.configuredOauths,Ie(o)):Ye(e.message)})}(function(){!function(){var e=Be("div"),o=Be("button");e.id=l,o.id=d,Me(e,"mod-tools"),o.innerHTML=ve?"Unlock Thread":"Lock Thread",Ae(o,N.threadLockToggle),Re(e,"style","display: none"),Ce(e,o),Ce(re,e)}(),function(e){var o=Be("div"),n=Be("div"),t=He(a),i=Be("div");o.id=c,i.id=h,Me(o,"login"),Me(n,"login-text"),Me(i,"comments"),n.innerText="Login",i.innerHTML="",Ae(n,N.loginBoxShow,null),Ce(o,n),ve||ue?me||pe?(Ce(t,Xe("This thread is locked. You cannot add new comments.")),Ne(He(c))):(Ce(t,o),Ce(t,Ve("root"))):(me?Ne(He(c)):Ce(t,o),Ce(t,Ve("root"))),Ce(t,i),Ce(re,t),Ie(e)}(function(){!function(){var o,n={},e=He(h);ae.forEach(function(e){(o=e.parentHex)in n||(n[o]=[]),e.creationDate=new Date(e.creationDate),n[o].push(e),ce[e.commentHex]={html:e.html,markdown:e.markdown}});var t=$e(n,"root");t&&Ce(e,t)}(),Ce(re,o),function(){if(window.location.hash)if(window.location.hash.startsWith("#commento-")){var e=He(P+window.location.hash.split("-")[1]);if(null===e)return;Me(e,"highlighted-card"),e.scrollIntoView(!0)}else window.location.hash.startsWith("#commento")&&re.scrollIntoView(!0)}(),N.allShow(),function(){for(var e=i.getElementsByClassName("commento-name"),o=0;o<e.length;o++)Re(e[o],"style","max-width: "+(e[o].getBoundingClientRect().width+20)+"px;")}(),Ie(e)})})})}else console.log("[commento] error: no root element with ID '"+m+"' found")});function io(){to||(to=!0,e(),"true"===r||void 0===r?N.main(void 0):"false"!==r&&console.log("[commento] error: invalid value for data-auto-init; allowed values: true, false"))}var ro=function(){var e=i.readyState;"loading"===e?i.addEventListener("readystatechange",ro):"interactive"===e?io():"complete"===e&&io()};ro()}(window.commento,document);